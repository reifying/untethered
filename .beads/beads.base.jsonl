{"id":"voice-code-desktop-3b-375","content_hash":"f94a223be70356946eb76821e6da77b256d7501b05cef8b9c9980dd70bc75be1","title":"macOS Desktop UX Improvements","description":"## Design Document\n@docs/design/desktop-ux-improvements.md\n\n## Overview\nImplement 8 UX improvements for the macOS desktop app to provide native-feeling interactions including keyboard shortcuts, trackpad gestures, hover tooltips, and platform-appropriate settings.\n\n## Features\n1. Text input Return key (send) and Shift+Return (newline)\n2. Trackpad two-finger swipe left for back navigation\n3. Button hover tooltips with keyboard shortcuts\n4. Fix command history sheet sizing\n5. Enable system prompt editing in settings\n6. Hide iOS-only audio settings on macOS\n7. Add stop speech control (toolbar + Message Detail)\n8. Connection status tap to retry reconnection\n\n## Acceptance Criteria\n1. Return key sends prompt in text input (macOS)\n2. Shift+Return inserts newline (macOS)\n3. Two-finger swipe left navigates back in Session view (macOS)\n4. Two-finger swipe left navigates back in Project view (macOS)\n5. All toolbar buttons show hover tooltips (macOS)\n6. Cmd+R refreshes session (macOS)\n7. Cmd+. stops speech (macOS)\n8. Command history sheet shows full content (macOS)\n9. System prompt is editable in settings (both)\n10. Silence speech on vibrate hidden on macOS\n11. Continue playback when locked hidden on macOS\n12. Stop speech button appears in toolbar when speaking (macOS)\n13. Read Aloud toggles to Stop when speaking (both)\n14. Clicking connection status retries connection (both)\n15. All existing iOS functionality unchanged","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T19:31:10.487169-06:00","updated_at":"2026-01-05T21:03:47.927126-06:00","closed_at":"2026-01-05T21:03:47.927126-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.10","content_hash":"81e3708db9cd137b367093d2cd3db1f2d5bd83a0696c4d3ca997377e0278a375","title":"Add connection retry on status icon tap","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#8-connection-retry-on-status-icon-tap\n\n## Context\nThe connection status icon is informational only. When connection fails and stops retrying, users have no way to manually trigger a reconnection attempt.\n\n## Requirements\n- [ ] Make connection status indicator tappable (both platforms)\n- [ ] Tapping triggers reconnection attempt\n- [ ] Add forceReconnect() method to VoiceCodeClient\n- [ ] Add hover tooltip on macOS\n\n## Technical Approach\nPart 1 - VoiceCodeClient.forceReconnect():\n- Add new public method to VoiceCodeClient.swift\n- Reset reconnectionAttempts to 0\n- Call disconnect()\n- Call connect(sessionId:) if sessionId available\n- Log reconnection attempt\n\nPart 2 - UI changes:\n- Modify ConversationView.swift (lines 239-246)\n- Wrap existing HStack in Button\n- Use .buttonStyle(.plain) to preserve appearance\n- Add .help(\"Click to reconnect\") on macOS\n\nFiles to modify:\n- ios/VoiceCode/Managers/VoiceCodeClient.swift\n- ios/VoiceCode/Views/ConversationView.swift\n\n## Verification\n- [ ] Manual verification: Disconnect backend, wait for connection to fail\n- [ ] Click on status indicator, verify reconnection attempt starts\n- [ ] Verify status updates when connection succeeds\n- [ ] Manual verification (macOS): Hover over status shows tooltip\n\n## Acceptance Criteria\n- AC14: Clicking connection status retries connection (both)\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:35:13.423865-06:00","updated_at":"2026-01-05T19:35:13.423865-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.11","content_hash":"aca4bd99e8dd8cb8679b094c348ad99795ad4c2c09cc4ad7e62744608a21b7ed","title":"Apply swipe navigation to all applicable views","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#2-trackpad-swipe-navigation-macos\n\n## Context\nWith the SwipeNavigationModifier created, apply swipe-to-back gesture to all views that have back navigation on macOS.\n\n## Requirements\n- [ ] Add .swipeToBack() to ConversationView (pop to session list)\n- [ ] Add .swipeToBack() to SessionsForDirectoryView (pop to directory list)\n- [ ] Add .swipeToBack() to CommandOutputDetailView (pop to command history)\n- [ ] Add .swipeToBack() to CommandExecutionView (pop to command menu)\n- [ ] Add .swipeToBack() to SessionInfoView (dismiss sheet)\n- [ ] Add .swipeToBack() to RecipeMenuView (dismiss sheet)\n- [ ] Add .swipeToBack() to APIKeyManagementView (dismiss sheet)\n- [ ] Add .swipeToBack() to DebugLogsView (pop to directory list)\n\n## Technical Approach\nFor navigation stack views (pop action):\n- Pass custom action to .swipeToBack { navigationPath.removeLast() }\n- Or use environment dismiss if simpler\n\nFor sheet views (dismiss):\n- Use .swipeToBack() with no arguments (uses default dismiss)\n\nNote: Test NavigationStack on macOS first - it may already support swipe gestures natively.\n\nFiles to modify:\n- ios/VoiceCode/Views/ConversationView.swift\n- ios/VoiceCode/Views/SessionsForDirectoryView.swift\n- ios/VoiceCode/Views/CommandOutputDetailView.swift\n- ios/VoiceCode/Views/CommandExecutionView.swift\n- ios/VoiceCode/Views/SessionInfoView.swift\n- ios/VoiceCode/Views/RecipeMenuView.swift\n- ios/VoiceCode/Views/APIKeyManagementView.swift\n- ios/VoiceCode/Views/DebugLogsView.swift\n\nDependencies:\n- Requires: Create SwipeNavigationModifier task (voice-code-desktop-3b-375.2)\n\n## Verification\n- [ ] Manual verification: Two-finger swipe left in ConversationView navigates back\n- [ ] Manual verification: Two-finger swipe left in SessionsForDirectoryView navigates back\n- [ ] Manual verification: Two-finger swipe left in sheet views dismisses\n- [ ] Verify iOS builds successfully (no-op behavior)\n- [ ] Verify no conflicts with NavigationStack built-in gestures\n\n## Acceptance Criteria\n- AC3: Two-finger swipe left navigates back in Session view (macOS)\n- AC4: Two-finger swipe left navigates back in Project view (macOS)\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nMust wait for: Create SwipeNavigationModifier task\nCan be worked alongside: All other tasks (after dependency complete)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:35:38.546829-06:00","updated_at":"2026-01-05T19:35:38.546829-06:00","source_repo":".","dependencies":[{"issue_id":"voice-code-desktop-3b-375.11","depends_on_id":"voice-code-desktop-3b-375.2","type":"blocks","created_at":"2026-01-05T19:35:38.547358-06:00","created_by":"travisbrown"}]}
{"id":"voice-code-desktop-3b-375.2","content_hash":"58d43887950374190b5fa4e7a246a55def5dabacff8a54ef61ff9f0f04e7acfe","title":"Create SwipeNavigationModifier for macOS back navigation","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#2-trackpad-swipe-navigation-macos\n\n## Context\nThis is a foundation task that creates a reusable SwiftUI view modifier for swipe-to-back navigation on macOS. Other views will depend on this modifier being available.\n\n## Requirements\n- [ ] Create SwipeToBackModifier ViewModifier (macOS only)\n- [ ] Create swipeToBack() View extension (available on both platforms, no-op on iOS)\n- [ ] Support custom action closure for navigation stack views\n- [ ] Support default dismiss behavior for sheet views\n- [ ] Use DragGesture with 50pt minimum distance\n- [ ] Detect leftward horizontal swipe (translation.width \u003c -50)\n\n## Technical Approach\n- Create new file: ios/VoiceCode/Utils/SwipeNavigationModifier.swift\n- Use #if os(macOS) for the modifier struct\n- Extension available on both platforms with internal conditional\n- No dependencies on other tasks\n\n## Verification\n- [ ] Manual verification: Apply modifier to a test view and verify swipe triggers action\n- [ ] Verify iOS build succeeds (no-op behavior)\n- [ ] Verify macOS build succeeds with functional swipe\n\n## Acceptance Criteria\nThis task enables:\n- AC3: Two-finger swipe left navigates back in Session view\n- AC4: Two-finger swipe left navigates back in Project view\n\n## Parallelization\nCan be worked alongside: All other tasks except Apply swipe navigation to views","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:32:07.403331-06:00","updated_at":"2026-01-05T19:32:07.403331-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.3","content_hash":"e57ab185fa21276e8e6e4e7621d7fed205130eb9c2b50874925d65b878e00be5","title":"Implement Return key sends prompt, Shift+Return inserts newline","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#1-text-input-return-key-behavior\n\n## Context\nOn macOS, pressing Return in the text input currently highlights text instead of sending the prompt. This is a core usability issue that must be fixed for natural desktop interaction.\n\n## Requirements\n- [ ] Return (Enter) key sends the prompt on macOS\n- [ ] Shift+Return inserts a newline on macOS\n- [ ] iOS behavior unchanged (uses dedicated send button)\n- [ ] Text field clears after sending\n\n## Technical Approach\n- Modify ConversationTextInputView struct in ConversationView.swift (around line 1422)\n- Use .onKeyPress(.return) modifier (requires macOS 14.0+, codebase targets 15.0+)\n- Check press.modifiers.contains(.shift) for newline vs send\n- Wrap in #if os(macOS) conditional\n- Alternative: NSViewRepresentable with NSTextViewDelegate if onKeyPress insufficient\n\nFiles to modify:\n- ios/VoiceCode/Views/ConversationView.swift (ConversationTextInputView struct)\n\n## Verification\n- [ ] Manual verification (macOS): Type text, press Return - prompt sends\n- [ ] Manual verification (macOS): Type text, press Shift+Return - newline inserted\n- [ ] Manual verification (iOS): Existing send button behavior unchanged\n- [ ] Verify prompt text clears after sending\n\n## Acceptance Criteria\n- AC1: Return key sends prompt in text input (macOS)\n- AC2: Shift+Return inserts newline (macOS)\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:32:31.510125-06:00","updated_at":"2026-01-05T19:32:31.510125-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.4","content_hash":"caaafb642470cf2663f9d75a0bc45a5a8ef50a6ea0581509ce68440389764086","title":"Add hover tooltips to all toolbar buttons on macOS","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#3-button-hover-tooltips-macos\n\n## Context\nToolbar buttons have no discoverability on macOS. Users cannot discover what buttons do or their keyboard shortcuts without trial and error. Adding hover tooltips improves UX and documents shortcuts inline.\n\n## Requirements\n- [ ] Add .help() modifier to all toolbar buttons in macOS toolbar section\n- [ ] Include keyboard shortcuts in tooltip text where applicable\n- [ ] Tooltips should be concise and descriptive\n\n## Buttons to Add Tooltips:\n| Button | Tooltip |\n|--------|---------|\n| Refresh | Refresh session (Cmd+R) |\n| Kill Session | Stop current prompt (Cmd+K) |\n| Session Info | Session info (Cmd+I) |\n| Auto-scroll | Toggle auto-scroll |\n| Compact | Compact session history |\n| Recipe | Run recipe (Cmd+Shift+R) |\n| Queue Remove | Remove from queue |\n| Stop Speech | Stop speaking (Cmd+.) |\n| Voice Input | Start voice input (Space) |\n\n## Technical Approach\n- Modify ConversationView.swift toolbar section (lines 396-484)\n- Add .help() modifier to each Button in the macOS ToolbarItem\n- No #if os(macOS) needed since already in macOS toolbar section\n\nFiles to modify:\n- ios/VoiceCode/Views/ConversationView.swift\n\n## Verification\n- [ ] Manual verification: Hover over each button on macOS, verify tooltip appears\n- [ ] Verify tooltip text matches specification\n- [ ] Verify tooltips include keyboard shortcuts where applicable\n\n## Acceptance Criteria\n- AC5: All toolbar buttons show hover tooltips (macOS)\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:32:54.157966-06:00","updated_at":"2026-01-05T19:32:54.157966-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.5","content_hash":"97b51ab4db81e671aed00be936ae1748ea6f3a6635e6e7ba472ea382ac0b2caa","title":"Add keyboard shortcuts to toolbar actions on macOS","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#3-button-hover-tooltips-macos\n\n## Context\nmacOS users expect keyboard shortcuts for common actions. Adding shortcuts improves productivity and provides a native desktop experience.\n\n## Requirements\n- [ ] Add .keyboardShortcut() modifier to toolbar buttons on macOS\n- [ ] Shortcuts only active on macOS (wrapped in #if os(macOS) or in macOS toolbar section)\n\n## Shortcuts to Implement:\n| Action | Shortcut |\n|--------|----------|\n| Refresh | Cmd+R |\n| Session Info | Cmd+I |\n| Stop Speech | Cmd+. |\n| Recipe Menu | Cmd+Shift+R |\n| Kill Session | Cmd+K |\n\nNote: Send Prompt (Return) is handled by separate Return key behavior task.\n\n## Technical Approach\n- Modify ConversationView.swift toolbar section (lines 396-484)\n- Add .keyboardShortcut() modifier to each Button\n- Example: .keyboardShortcut(\"r\", modifiers: [.command])\n- Kill Session uses Cmd+K to avoid conflict with Stop Speech (Cmd+.)\n\nFiles to modify:\n- ios/VoiceCode/Views/ConversationView.swift\n\n## Verification\n- [ ] Manual verification: Press Cmd+R in conversation view - session refreshes\n- [ ] Manual verification: Press Cmd+I - session info opens\n- [ ] Manual verification: Press Cmd+. while speaking - speech stops\n- [ ] Manual verification: Press Cmd+Shift+R - recipe menu opens\n- [ ] Verify no shortcut conflicts with system shortcuts\n\n## Acceptance Criteria\n- AC6: Cmd+R refreshes session (macOS)\n- AC7: Cmd+. stops speech (macOS)\n\n## Parallelization\nCan be worked alongside: All other tasks\nShould be done after: Add hover tooltips task (both modify same area)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:33:15.3864-06:00","updated_at":"2026-01-05T19:33:15.3864-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.6","content_hash":"c39d5eb199ff369a8e3901259cb9bd429f077e76a752e5a1fd2253278d03a8ec","title":"Hide iOS-only audio settings on macOS","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#6-settings-hide-ios-only-options\n\n## Context\niOS-specific audio settings appear on macOS where they do not apply. These settings control mobile-specific behaviors (silent mode, screen lock) that have no macOS equivalent.\n\n## Requirements\n- [ ] Hide \"Silence speech when phone is on vibrate\" on macOS\n- [ ] Hide \"Continue playback even when locked\" on macOS\n- [ ] Settings remain visible and functional on iOS\n\n## Technical Approach\n- Modify SettingsView.swift\n- Wrap the Audio Behavior section in #if os(iOS) conditional\n- Simple platform conditional, no complex logic\n\nFiles to modify:\n- ios/VoiceCode/Views/SettingsView.swift\n\n## Verification\n- [ ] Manual verification (macOS): Open Settings, verify Audio Behavior section not visible\n- [ ] Manual verification (iOS): Open Settings, verify Audio Behavior section visible\n- [ ] Verify toggles still function correctly on iOS\n\n## Acceptance Criteria\n- AC10: \"Silence speech on vibrate\" hidden on macOS\n- AC11: \"Continue playback when locked\" hidden on macOS\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:33:37.941075-06:00","updated_at":"2026-01-05T19:33:37.941075-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.7","content_hash":"f1fa91da8f49eae87fcb82db7bc40da99a811242ff435e5a819bab4b914fa2a6","title":"Fix command history sheet sizing on macOS","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#4-command-history-sizing\n\n## Context\nThe command history sheet on macOS only shows the Done button with content not visible. This is a layout issue where the sheet needs minimum frame constraints.\n\n## Requirements\n- [ ] Command history sheet content is visible on macOS\n- [ ] Sheet has appropriate minimum dimensions\n- [ ] iOS behavior unchanged\n\n## Technical Approach\nNote: The \"command history\" button actually presents ActiveCommandsListView (defined in CommandExecutionView.swift), not CommandHistoryView.\n\nOption 1 (preferred): Add frame to sheet presentation\n- Modify SessionsForDirectoryView.swift (around line 293)\n- Add .frame(minWidth: 600, minHeight: 400) to the sheet on macOS\n\nOption 2: Add frame inside ActiveCommandsListView\n- Modify CommandExecutionView.swift\n- Add .frame(minWidth: 500, minHeight: 300) to the List\n\nFiles to modify:\n- ios/VoiceCode/Views/SessionsForDirectoryView.swift (preferred)\n- OR ios/VoiceCode/Views/CommandExecutionView.swift (alternative)\n\n## Verification\n- [ ] Manual verification (macOS): Open command history sheet, verify content visible\n- [ ] Verify sheet is scrollable when content exceeds view\n- [ ] Verify Done button still accessible and functional\n- [ ] Manual verification (iOS): Sheet behavior unchanged\n\n## Acceptance Criteria\n- AC8: Command history sheet shows full content (macOS)\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:33:59.023106-06:00","updated_at":"2026-01-05T19:33:59.023106-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.8","content_hash":"9dec1c0c77cb1a4425581f42e6951c8745e0ae997f586e824dcc7d31c1cda2db","title":"Fix system prompt editing in settings on macOS","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#5-settings-system-prompt-editing\n\n## Context\nThe system prompt field in settings cannot be modified on macOS. The root cause needs investigation - may be TextField behavior with .lineLimit() or a binding issue.\n\n## Requirements\n- [ ] Investigate root cause of editing issue on macOS\n- [ ] System prompt TextField is editable on macOS\n- [ ] Changes persist correctly\n- [ ] iOS behavior unchanged\n\n## Investigation Steps\n1. Is the TextField receiving focus?\n2. Is text input being captured?\n3. Is the binding updating?\n\nCurrent implementation uses:\n- Local @State variable localSystemPrompt\n- Initialized from settings.systemPrompt in .onAppear\n- onChange syncs back to settings.systemPrompt\n\n## Technical Approach\nOption A - Use TextEditor on macOS:\n- Use TextEditor(text: $localSystemPrompt) on macOS\n- Keep TextField on iOS\n- Add .frame(minHeight: 100) for TextEditor\n\nOption B - Fix TextField styling:\n- Add .textFieldStyle(.plain) on macOS\n- May resolve focus/input issues\n\nFiles to modify:\n- ios/VoiceCode/Views/SettingsView.swift (lines 176-189)\n\n## Verification\n- [ ] Manual verification (macOS): Click on system prompt field, type text\n- [ ] Verify text appears as typed\n- [ ] Close and reopen settings, verify text persisted\n- [ ] Manual verification (iOS): System prompt field still works\n\n## Acceptance Criteria\n- AC9: System prompt is editable in settings (both)\n- AC15: All existing iOS functionality unchanged\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:34:23.922304-06:00","updated_at":"2026-01-05T19:34:23.922304-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-375.9","content_hash":"f0a620ccce4199bd35c1557ac6a1df4211e2f819804bc2908f83e0ef3ad4664a","title":"Add stop speech control to toolbar and Message Detail","description":"## Design Reference\n@docs/design/desktop-ux-improvements.md#7-stop-speech-control\n\n## Context\nThere is no way to stop TTS when agent response is being read aloud. Users need a way to interrupt speech during live sessions or when reviewing new messages.\n\n## Requirements\n- [ ] Add stop speech button to macOS toolbar (visible when speaking)\n- [ ] Add Cmd+. keyboard shortcut for stop speech (macOS)\n- [ ] Toggle Read Aloud button to Stop when speaking (both platforms)\n- [ ] Button icon changes: speaker.wave.2.fill -\u003e stop.circle.fill\n- [ ] Button text changes: Read Aloud -\u003e Stop\n- [ ] Button color changes to red when stopping\n\n## Technical Approach\nPart 1 - Toolbar button (macOS only):\n- Modify ConversationView.swift toolbar (lines 396-484)\n- Add conditional button: if voiceOutput.isSpeaking { ... }\n- Use stop.circle.fill icon with red color\n- Add .help() and .keyboardShortcut(\".\", modifiers: [.command])\n- voiceOutput is @StateObject in ConversationView (line 46)\n\nPart 2 - Message Detail toggle (shared):\n- Modify messageDetailContent in ConversationView.swift\n- Change Read Aloud button to toggle based on voiceOutput.isSpeaking\n- If speaking: show Stop with red icon, call voiceOutput.stop()\n- If not speaking: show Read Aloud with speaker icon, call voiceOutput.speak()\n\nFiles to modify:\n- ios/VoiceCode/Views/ConversationView.swift\n\n## Verification\n- [ ] Manual verification (macOS): Start TTS, verify Stop button appears in toolbar\n- [ ] Manual verification (macOS): Click Stop button, verify speech stops\n- [ ] Manual verification (macOS): Press Cmd+., verify speech stops\n- [ ] Manual verification (both): Open message detail during TTS, verify button shows Stop\n- [ ] Manual verification (both): Click Stop in message detail, verify speech stops\n- [ ] Verify button reverts to Read Aloud after speech stops\n\n## Acceptance Criteria\n- AC7: Cmd+. stops speech (macOS)\n- AC12: Stop speech button appears in toolbar when speaking (macOS)\n- AC13: Read Aloud toggles to Stop when speaking (both)\n\n## Parallelization\nCan be worked alongside: All other tasks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:34:50.245991-06:00","updated_at":"2026-01-05T19:34:50.245991-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-54k","content_hash":"7c40ba23bc045f27300706a62ebb9285611670fb0c7e3266ed216fb7f9c4e9af","title":"Create system color extensions for cross-platform colors","description":"Create Color extensions to eliminate scattered platform-specific color initialization.\n\n## Problem\nSystem colors require different initialization per platform:\n```swift\n#if os(iOS)\n.background(Color(UIColor.systemBackground))\n#elseif os(macOS)\n.background(Color(NSColor.windowBackgroundColor))\n#endif\n```\n\n## Solution\nCreate color extensions:\n```swift\nextension Color {\n    static var systemBackground: Color {\n        #if os(iOS)\n        Color(UIColor.systemBackground)\n        #else\n        Color(NSColor.windowBackgroundColor)\n        #endif\n    }\n    \n    static var secondarySystemBackground: Color {\n        #if os(iOS)\n        Color(UIColor.secondarySystemBackground)\n        #else\n        Color(NSColor.controlBackgroundColor)\n        #endif\n    }\n    \n    static var systemGroupedBackground: Color {\n        #if os(iOS)\n        Color(UIColor.systemGroupedBackground)\n        #else\n        Color(NSColor.windowBackgroundColor)\n        #endif\n    }\n}\n```\n\n## Files to Update\n- ConversationView.swift\n- SessionsView.swift\n- CommandExecutionView.swift\n- DebugLogsView.swift\n- CommandOutputDetailView.swift\n\n## Acceptance Criteria\n- [ ] Color extensions created in Utils/\n- [ ] Views migrated to use Color.systemBackground etc.\n- [ ] Builds pass on both platforms\n- [ ] No visual regression","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-06T08:27:21.020705-06:00","updated_at":"2026-01-06T08:27:21.020705-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-coh","content_hash":"4a20905e963b0db14f5579382a72131df5cdb3f068e845a14c77843c75cda23d","title":"Create NavigationController\u003cContent\u003e reusable component","description":"Create a reusable NavigationController component to eliminate duplicated #if os(macOS)/os(iOS) navigation container patterns across 8+ views.\n\n## Problem\nNavigation setup is duplicated across views with the same pattern:\n```swift\n@ViewBuilder\nprivate var someNavigation: some View {\n    #if os(macOS)\n    NavigationStack {\n        content\n    }\n    .frame(minWidth: 450, minHeight: 350)\n    #else\n    NavigationView {\n        content\n    }\n    #endif\n}\n```\n\n## Solution\nCreate a reusable component:\n```swift\nstruct NavigationController\u003cContent: View\u003e: View {\n    let content: Content\n    let minWidth: CGFloat\n    let minHeight: CGFloat\n    \n    var body: some View {\n        #if os(macOS)\n        NavigationStack { content }\n            .frame(minWidth: minWidth, minHeight: minHeight)\n        #else\n        NavigationView { content }\n        #endif\n    }\n}\n```\n\n## Files to Update\n- SessionsView.swift\n- ConversationView.swift (already has .swipeToBack())\n- APIKeyManagementView.swift\n- AuthenticationRequiredView.swift\n- SettingsView.swift\n- RecipeMenuView.swift\n- SessionInfoView.swift\n- SessionsForDirectoryView.swift\n\n## Acceptance Criteria\n- [ ] NavigationController component created in Utils/\n- [ ] All 8+ views migrated to use new component\n- [ ] macOS and iOS builds pass\n- [ ] All existing tests pass\n- [ ] No visual regression on either platform","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-06T08:26:46.841535-06:00","updated_at":"2026-01-06T09:55:29.037439-06:00","closed_at":"2026-01-06T09:55:29.037439-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-km1","content_hash":"eafd4ab8ae90485e16f6e3c42d4c3c31e9c6a3563bf36b59a66541fdd576b824","title":"Create ToolbarBuilder static methods for platform toolbars","description":"Create ToolbarBuilder utility with static methods to eliminate duplicated toolbar placement logic across 5+ views.\n\n## Problem\nToolbar buttons require different placements per platform:\n```swift\n.toolbar {\n    #if os(iOS)\n    ToolbarItem(placement: .navigationBarLeading) {\n        Button(\"Cancel\", action: onCancel)\n    }\n    #else\n    ToolbarItem(placement: .cancellationAction) {\n        Button(\"Cancel\", action: onCancel)\n    }\n    #endif\n    // Repeated for trailing/confirmation buttons...\n}\n```\n\n## Solution\nCreate ToolbarBuilder utility:\n```swift\nstruct ToolbarBuilder {\n    static func cancelButton(_ action: @escaping () -\u003e Void) -\u003e some ToolbarContent {\n        #if os(iOS)\n        ToolbarItem(placement: .navigationBarLeading) {\n            Button(\"Cancel\", action: action)\n        }\n        #else\n        ToolbarItem(placement: .cancellationAction) {\n            Button(\"Cancel\", action: action)\n        }\n        #endif\n    }\n    \n    static func confirmButton(_ title: String, isDisabled: Bool = false, _ action: @escaping () -\u003e Void) -\u003e some ToolbarContent {\n        // Similar pattern...\n    }\n    \n    static func doneButton(_ action: @escaping () -\u003e Void) -\u003e some ToolbarContent {\n        // Similar pattern...\n    }\n}\n```\n\n## Files to Update\n- SessionsView.swift\n- ConversationView.swift\n- SettingsView.swift\n- APIKeyManagementView.swift\n- RecipeMenuView.swift\n- SessionInfoView.swift\n\n## Acceptance Criteria\n- [ ] ToolbarBuilder created in Utils/\n- [ ] cancelButton, confirmButton, doneButton methods implemented\n- [ ] Views migrated to use ToolbarBuilder\n- [ ] macOS and iOS builds pass\n- [ ] All existing tests pass","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-06T08:26:59.068227-06:00","updated_at":"2026-01-06T12:02:02.269818-06:00","closed_at":"2026-01-06T12:02:02.269818-06:00","source_repo":"."}
{"id":"voice-code-desktop-3b-sop","content_hash":"010fcbc906799923ef55a7832e4da8c9943723d5c477bdc54a5ffb769852737a","title":"Create iOS input modifier extensions","description":"Create View extensions for iOS-specific input modifiers to consolidate scattered conditional compilation.\n\n## Problem\niOS-specific modifiers like .autocapitalization() and .keyboardType() are scattered with conditionals:\n```swift\nTextField(\"Server Address\", text: $settings.serverURL)\n    #if os(iOS)\n    .autocapitalization(.none)\n    .keyboardType(.URL)\n    #endif\n```\n\n## Solution\nCreate modifier extension:\n```swift\nextension View {\n    func urlInputConfiguration() -\u003e some View {\n        #if os(iOS)\n        self\n            .autocapitalization(.none)\n            .keyboardType(.URL)\n            .disableAutocorrection(true)\n        #else\n        self\n        #endif\n    }\n    \n    func textInputConfiguration() -\u003e some View {\n        #if os(iOS)\n        self\n            .autocapitalization(.sentences)\n        #else\n        self\n        #endif\n    }\n}\n```\n\n## Files to Update\n- SettingsView.swift (server URL field)\n- SessionsView.swift (session name fields)\n- APIKeyManagementView.swift (API key field)\n\n## Acceptance Criteria\n- [ ] Input modifier extensions created in Utils/\n- [ ] Views migrated to use extensions\n- [ ] Builds pass on both platforms\n- [ ] Tests pass","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-06T08:27:09.242668-06:00","updated_at":"2026-01-06T08:27:09.242668-06:00","source_repo":"."}
