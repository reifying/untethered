{"version":3,"sources":["voice_code/subs.cljs"],"mappings":"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","names":["re_frame.core.reg_sub","db","_","cljs.core.get_in","p__12029","vec__12036","cljs.core.nth","session-id","p__12065","vec__12066","sessions","active-id","cljs.core.get","cljs.core/vals","cljs.core/group-by","cljs.core.map","p__12085","vec__12089","dir","cljs.core/count","cljs.core.apply","cljs.core/max","cljs.core.sort_by","cljs.core/>","p__12096","vec__12097","directory","p1__12095#","cljs.core.filter","cljs.core._EQ_","p__12100","vec__12101","p__12105","vec__12107","messages","p__12110","vec__12111","locked-sessions","cljs.core/contains?","p__12114","vec__12115","p__12120","vec__12121","re_frame.core.subscribe"],"sourcesContent":["(ns voice-code.subs\n  \"re-frame subscriptions for the voice-code app.\"\n  (:require [re-frame.core :as rf]))\n\n;; ============================================================================\n;; Connection State\n;; ============================================================================\n\n(rf/reg-sub\n :connection/status\n (fn [db _]\n   (get-in db [:connection :status])))\n\n(rf/reg-sub\n :connection/authenticated?\n (fn [db _]\n   (get-in db [:connection :authenticated?])))\n\n(rf/reg-sub\n :connection/error\n (fn [db _]\n   (get-in db [:connection :error])))\n\n(rf/reg-sub\n :connection/reconnect-attempts\n (fn [db _]\n   (get-in db [:connection :reconnect-attempts])))\n\n;; ============================================================================\n;; Sessions\n;; ============================================================================\n\n(rf/reg-sub\n :sessions/all\n (fn [db _]\n   (:sessions db)))\n\n(rf/reg-sub\n :sessions/by-id\n (fn [db [_ session-id]]\n   (get-in db [:sessions session-id])))\n\n(rf/reg-sub\n :sessions/active-id\n (fn [db _]\n   (:active-session-id db)))\n\n(rf/reg-sub\n :sessions/active\n :<- [:sessions/all]\n :<- [:sessions/active-id]\n (fn [[sessions active-id] _]\n   (get sessions active-id)))\n\n(rf/reg-sub\n :sessions/directories\n :<- [:sessions/all]\n (fn [sessions _]\n   (->> (vals sessions)\n        (group-by :working-directory)\n        (map (fn [[dir sessions]]\n               {:directory dir\n                :session-count (count sessions)\n                :last-modified (apply max (map :last-modified sessions))}))\n        (sort-by :last-modified >))))\n\n(rf/reg-sub\n :sessions/for-directory\n :<- [:sessions/all]\n (fn [sessions [_ directory]]\n   (->> (vals sessions)\n        (filter #(= directory (:working-directory %)))\n        (sort-by :last-modified >))))\n\n;; ============================================================================\n;; Messages\n;; ============================================================================\n\n(rf/reg-sub\n :messages/all\n (fn [db _]\n   (:messages db)))\n\n(rf/reg-sub\n :messages/for-session\n (fn [db [_ session-id]]\n   (get-in db [:messages session-id] [])))\n\n(rf/reg-sub\n :messages/for-active-session\n :<- [:messages/all]\n :<- [:sessions/active-id]\n (fn [[messages active-id] _]\n   (get messages active-id [])))\n\n;; ============================================================================\n;; Session Locking\n;; ============================================================================\n\n(rf/reg-sub\n :locked-sessions\n (fn [db _]\n   (:locked-sessions db)))\n\n(rf/reg-sub\n :session/locked?\n :<- [:locked-sessions]\n (fn [locked-sessions [_ session-id]]\n   (contains? locked-sessions session-id)))\n\n(rf/reg-sub\n :active-session/locked?\n :<- [:locked-sessions]\n :<- [:sessions/active-id]\n (fn [[locked-sessions active-id] _]\n   (contains? locked-sessions active-id)))\n\n;; ============================================================================\n;; Commands\n;; ============================================================================\n\n(rf/reg-sub\n :commands/available\n (fn [db _]\n   (get-in db [:commands :available])))\n\n(rf/reg-sub\n :commands/running\n (fn [db _]\n   (get-in db [:commands :running])))\n\n(rf/reg-sub\n :commands/history\n (fn [db _]\n   (get-in db [:commands :history])))\n\n;; ============================================================================\n;; Resources\n;; ============================================================================\n\n(rf/reg-sub\n :resources/list\n (fn [db _]\n   (get-in db [:resources :list])))\n\n(rf/reg-sub\n :resources/pending-uploads\n (fn [db _]\n   (get-in db [:resources :pending-uploads])))\n\n;; ============================================================================\n;; Settings\n;; ============================================================================\n\n(rf/reg-sub\n :settings/all\n (fn [db _]\n   (:settings db)))\n\n(rf/reg-sub\n :settings/server-url\n (fn [db _]\n   (get-in db [:settings :server-url])))\n\n(rf/reg-sub\n :settings/server-port\n (fn [db _]\n   (get-in db [:settings :server-port])))\n\n;; ============================================================================\n;; UI State\n;; ============================================================================\n\n(rf/reg-sub\n :ui/loading?\n (fn [db _]\n   (get-in db [:ui :loading?])))\n\n(rf/reg-sub\n :ui/current-error\n (fn [db _]\n   (get-in db [:ui :current-error])))\n\n(rf/reg-sub\n :ui/draft\n (fn [db [_ session-id]]\n   (get-in db [:ui :drafts session-id] \"\")))\n\n(rf/reg-sub\n :ui/active-draft\n :<- [:sessions/active-id]\n (fn [active-id _]\n   (rf/subscribe [:ui/draft active-id])))\n"]}